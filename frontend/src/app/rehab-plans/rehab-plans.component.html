<br>
<br>


<!--<h2>Rehabilitation Plans</h2>-->
<!--<div class="input-group mb-3 searchbar" id="custom-search-input">-->
<!--    <input type="text" class="form-control" (keyup.enter)="searchPlans(searchValue.value)" placeholder="Search for plans here..." aria-label="Search for plans here..." aria-describedby="basic-addon2" #searchValue>-->
<!--    <span class="input-group-btn">-->

<!--    <button class="btn btn-info btn-lg" type="button" (click)="searchPlans(searchValue.value)"  location="top" ngbTooltip="Search">-->
<!--      <fa name="search"></fa>-->
<!--    </button>-->
<!--</span>-->
<!--</div>-->
<!--<br>-->
<button class="create btn btn-primary btn-med" (click)="plan(create)">Create New Plan</button>
<!--<button class="back btn btn-primary btn-med" (click)="goBack()">Back</button>-->
<div class="container mt-3">
    <ng-template let-c="close" let-d="dismiss" #create>
        <div class="modal-header">
            <h4 class="modal-title">Create a new plan</h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form>
                <div class="form-group row">
                    <label for="name" class="col-sm-3 col-form-label">Name</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="name" placeholder="Name" #name>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="description" class="col-sm-3 col-form-label">Description</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="description" placeholder="Description" #description>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="authorName" class="col-sm-3 col-form-label">Author Name</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="authorName" placeholder="Author Name" #authorName>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="goal" class="col-sm-3 col-form-label">Goal</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="goal" placeholder="Goal" #goal>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="timeFrameToComplete" class="col-sm-3 col-form-label">Completion Date</label>
                    <div class="col-sm-9">
                        <div class="calFormat">
                            <input class="form-control" placeholder="Date (YYYY-MM-DD)" name="dp" [(ngModel)]="model" ngbDatepicker #d="ngbDatepicker" #timeFrameToComplete>
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
                            <fa name="calendar" style="width: 1.2rem; height: 1rem; cursor: pointer;"></fa>
                          </button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary btn-sm align-left" (click)="createPlan(name.value, description.value, 
          authorName.value, goal.value, timeFrameToComplete.value); c('Close click')">Confirm</button>
            <button type="button" class="btn btn-secondary btn-sm" (click)="c('Close click')">Cancel</button>
        </div>
    </ng-template>
</div>
<div class="page">
    <div class="row">
        <div class="col-lg-6">
            <mat-card>
                <mat-card-title>Current Rehab Plans</mat-card-title>
                <mat-card-content>
                    <br><br>
                    <mat-form-field>
                        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter" #searchString>
                    </mat-form-field>
                    <mat-list>
                        <mat-list-item class="listItems" *ngFor="let plan of rehabPlans">
                            <br><br>
                            <button class="btn-block button" (click)="viewPlan(plan)">
                                <div class="row">
                                  <div class="col-sm-1">
                                      <i class="fa fa-columns"></i> &nbsp;
                                  </div>
                                  <br><br>
                                  <div class="col-sm-5">
                                      <h5><b>Plan Name: </b> &nbsp; {{ plan?.name }} </h5>
                                  </div>
                                  <div class="col-sm-4">
                                      <b>Author:</b> &nbsp; {{ plan?.authorName }}
                                  </div>
                                </div>
                
                            </button>
                            <br><br>
                            <div class="divider">
                                <mat-divider></mat-divider>
                            </div>
                        </mat-list-item>
                    </mat-list>
                    <mat-paginator [pageSizeOptions]="[10]"
                                   [length] = "total"
                                   (page) = "switchPage($event, searchString.value);"></mat-paginator>
                </mat-card-content>
            </mat-card>
        </div>
        <div class="col-lg-6">
            <mat-card>
                <mat-card-title>
                    <div>
                        <div>
                            <b> {{ currPlan?.name }}</b>
                        </div>
                        <mat-card-subtitle class="date">
                            <b>Target Date: &nbsp; </b>
                            <time datetime="yyyy-MM-dd"> {{ currPlan?.timeFrameToComplete | date:'mediumDate' }} </time>
                        </mat-card-subtitle>
                        <div>
                        </div>
                    </div>
                </mat-card-title>
                <div class="divider2">
                    <mat-divider></mat-divider>
                </div>
                <br>
                <mat-card-content>
                    <div class="row">
                        <div class="col-sm-2">
                            <b> Description: </b>
                        </div>
                        <div class="col-sm-10 descrip">
                            {{ currPlan?.description }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2">
                            <b>Goal: </b>
                        </div>
                        <div class="col-sm-10">
                            {{ currPlan?.goal }}
                        </div>
                    </div>
                </mat-card-content>
                <mat-divider></mat-divider>
                <br>
                <h6>
                    <b>Exercises Currently using this Plan:</b>
                </h6>
                <mat-list class="currList">
                    <mat-list-item class="listItems" *ngFor="let exercise of exercisesInCurrPlan">
                        <button class="btn-block clientList">
                      <div class="row">
                        <!--<div class="col-sm-1">-->
                        <!--    <i class="fa fa-user"></i> &nbsp;-->
                        <!--</div>-->
                        <div class="col-sm-6">
                            <h5><b>Exercise: </b> &nbsp; {{ exercise?.name }} </h5>
                        </div>
                        <div class="pull-right delete">
                            <i class="fa fa-times-circle" (click)="removeExercise(exercise, searchString.value)"></i>
                          </div>
                      </div>
                      <div class="divider">
                        <mat-divider></mat-divider>
                      </div>
                  </button>
                    </mat-list-item>
                </mat-list>
                <br>
                <br>
                <br>
                <div>
                    <h6>
                        <b>Select Exercises you wish to add</b>
                    </h6>
                    <mat-selection-list>
                        <mat-list-option *ngFor="let exercise of allExercises" (click)="addExercise(exercise, searchString.value)">
                            {{exercise.name}}
                        </mat-list-option>
                    </mat-selection-list>
                </div>
                <!--<div>-->
                <!--  <mat-form-field>-->
                <!--    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">-->
                <!--  </mat-form-field>-->
                <!--  <mat-table [dataSource]="dataSource" class="searchList" matSort>-->
                <!--      <ng-container matColumnDef="name">-->
                <!--          <mat-header-cell *matHeaderCellDef mat-sort-header> Client Name </mat-header-cell>-->
                <!--          <mat-cell *matCellDef="let row"> {{row?.name}} </mat-cell>-->
                <!--        </ng-container>-->

                <!--        <ng-container matColumnDef="plan">-->
                <!--          <mat-header-cell *matHeaderCellDef mat-sort-header> Current Plan </mat-header-cell>-->
                <!--          <mat-cell *matCellDef="let row"> {{ row?.plan }} </mat-cell>-->
                <!--        </ng-container>-->

                <!--        <ng-container matColumnDef="actions">-->
                <!--            <mat-header-cell *matHeaderCellDef> Assign Current Plan </mat-header-cell>-->
                <!--            <mat-cell *matCellDef="let row"> -->
                <!--              <button class="btn block" mat-button (click)="assignPatientPlan(row?.id, currPlan)">-->
                <!--                Assign-->
                <!--              </button>-->
                <!--            </mat-cell>-->
                <!--          </ng-container>-->

                <!--        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>-->
                <!--        <mat-row *matRowDef="let row; columns: displayedColumns;">-->
                <!--        </mat-row>-->
                <!--    </mat-table>-->
                <!--    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>-->
                <!--</div>-->
                <br>
                <!-- <mat-card-footer>
                  <div class="col-sm-12">
                      <button mat-button class="btn btn-block md">
                        <b>Add Patients to Plan</b>
                      </button>
                    </div>
                    <br>
              </mat-card-footer> -->
            </mat-card>
        </div>
    </div>
</div>
