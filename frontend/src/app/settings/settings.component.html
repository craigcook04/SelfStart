<mat-sidenav-container>
  <mat-sidenav #sidenav mode="side" opened="true" style="background-color: #0275d8;">
    <mat-nav-list style="top: -10px;">
      <mat-list-item [routerLinkActive]="['active']">
        <button class="btn-primary btn-block" mat-raised-button style="color:white;">Dashboard</button>
      </mat-list-item>
      <br>
      <mat-divider class="dividers"></mat-divider>
      <mat-list-item [routerLinkActive]="['active']">
        <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../exercises']">Exercise Menu</button>
      </mat-list-item>
      <br>
      <mat-divider class="dividers"></mat-divider>
      <mat-list-item [routerLinkActive]="['active']">
        <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../bookappointment']">Book Appointment</button>
      </mat-list-item>
      <br>
      <mat-divider class="dividers"></mat-divider>
      <mat-list-item [routerLinkActive]="['active']">
        <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../completetest']">Complete Assessment</button>
      </mat-list-item>
      <br>
      <mat-divider class="dividers"></mat-divider>
      <mat-list-item [routerLinkActive]="['active']">
        <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../transactions']">Transactions</button>
      </mat-list-item>
      <br>
      <mat-divider class="dividers"></mat-divider>
      <mat-list-item [routerLinkActive]="['active']">
        <button class="btn-primary btn-block" mat-raised-button style="color:white;">Settings</button>
      </mat-list-item>
      <br>
      <mat-divider class="dividers"></mat-divider>
      <mat-list-item [routerLinkActive]="['active']">
        <button class="btn-primary btn-block" mat-raised-button style="color:white;">Resources</button>
      </mat-list-item>
      <br>
      <mat-divider class="dividers"></mat-divider>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <br>
    <br>
    <!-- <ngb-tabset>
      <ngb-tab title="Account Details">
        <ng-template ngbTabContent>
          <div style="background-color: #F5F5F5;" class="jumbotron container-fluid">
            <br>
            <div style="margin-top: -10px;">
              <h3 class="title" style="color: #0275d8">
                Account Details
              </h3>
            </div>
          </div>
          <br>
          <div *ngIf="isClient">
            <mat-card class="accountinfo">
              <form>
                  <div class="form-group row">
                    <label for="inputFirstName" class="col-sm-3 col-form-label">First Name</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="inputFirstName" placeholder="First Name" value="{{patient.givenName}}" #newFirstName>
                      <div *ngIf='invalidFirstname' class='invalInput'>
                          Please enter a valid first name
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputLastName" class="col-sm-3 col-form-label">Last Name</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="inputLastName" placeholder="Last Name" value="{{patient.familyName}}" #newLastName>
                      <div *ngIf='invalidLastname' class='invalInput'>
                          Please enter a valid last name
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputPatientID" class="col-sm-3 col-form-label">Patient ID</label>
                    <div class="col-sm-9">
                      <input type="text" readonly class="form-control" id="inputPatientID" placeholder="Patient ID" value="{{patient.ID}}" placement="left"
                        ngbTooltip="The patient's ID cannot be modified">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputEmail" class="col-sm-3 col-form-label">Email</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="inputEmail" placeholder="Email" value="{{patient.email}}" #newEmail>
                      <div *ngIf='invalidEmail' class='invalInput'>
                          Please enter a valid email
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputDOB" class="col-sm-3 col-form-label">DOB</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="inputDOB" placeholder="yyyy/MM/dd" value="{{patient.DOB  | date: 'yyyy-MM-dd'}}" #newBirthDate>
                      <div *ngIf='invalidFirstName' class='invalInput'>
                          Please enter a valid Date of Birth
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputGender" class="col-sm-3 col-form-label">Gender</label>
                    <div class="col-sm-9">
                      <select #newGender class="mydropdown">
                            <option value="{{patient?.gender?._id}}">{{patient?.gender?.name}}</option>
                            <option disabled="disabled">----</option>
                            <option *ngFor="let g of genders" value="{{g._id}}">{{g.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row">
                      <label for="inputAddress" class="col-sm-3 col-form-label">Address</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control" id="inputAddress" placeholder="Address" value="{{patient.address}}" #newAddress>
                        <div *ngIf='invalidAddress' class='invalInput'>
                            Please enter a valid Address
                        </div>
                      </div>
                    </div>
                  <div class="form-group row">
                    <label for="inputPostalCode" class="col-sm-3 col-form-label">Postal Code</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="inputPostalCode" placeholder="Postal Code" value="{{patient.postalCode}}" #newPostalCode>
                      <div *ngIf='invalidPostalCode' class='invalInput'>
                          Please enter a valid Postal Code
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputPhoneNumber" class="col-sm-3 col-form-label">Phone Number</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="inputPhoneNumber" placeholder="Phone Number" value="{{patient.phone}}" (keyup)="closeWarning()" #newPhoneNumber>
                      <div *ngIf='invalidPhoneNumber' class='invalInput'>
                          Please enter a valid phone number
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputOthers" class="col-sm-3 col-form-label">Others</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="inputOthers" placeholder="Others" value="{{patient.others}}" #newOthers>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputOthers" class="col-sm-3 col-form-label">Country</label>
                    <div class="col-sm-9">
                      <select #newCountry class="mydropdown" (change)="SetProvinceBox(newProvince, newCity); GetProvinces(newCountry.value); DifferentGetProvince(newCountry.value); cannotContinue=false;">
                                <option value="{{patient.country?._id}}">{{patient.country.name}}</option>
                                <option disabled="disabled">----</option>
                                <option *ngFor="let country of countries" value="{{country._id}}">{{country.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputOthers" class="col-sm-3 col-form-label">Province</label>
                    <div class="col-sm-9">
                      <select #newProvince class="mydropdown" (change)="ClearAndGetCities(newProvince.value, newCity)">
                                <option value="{{patient.province?._id}}">{{patient?.province?.name}}</option>
                                <option disabled="disabled">----</option>
                                <option *ngFor="let province of provinces" value="{{province._id}}">{{province.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="inputOthers" class="col-sm-3 col-form-label">City</label>
                    <div class="col-sm-9">
                      <select #newCity class="mydropdown">
                                <option value="{{patient.city?._id}}">{{patient?.city?.name}}</option>
                                <option disabled="disabled">----</option>
                                <option *ngFor="let city of cities" value="{{city._id}}">{{city.name}}</option>
                      </select>
                    </div>
                  </div>
                </form>
              </mat-card>
                <div *ngIf="cannotContinue" class="fixchanges"><p class="failureMessage">Error! Please fix the errors in the form before continuing</p></div>
                <button type="button" class="btn btn-primary btn-sm" (click)="updatePatient(patient._id, newFirstName.value, newLastName.value, patient.ID, newEmail.value, newBirthDate.value, newPostalCode.value, newPhoneNumber.value, newOthers.value, newCountry.value, newProvince.value, newCity.value, newGender.value, newAddress.value); ">Confirm</button>      
          </div>
          <div *ngIf="isPhysio"></div>
        </ng-template>
      </ngb-tab>
      <ngb-tab title="Change Password">
        <ng-template ngbTabContent>
          <div style="background-color: #F5F5F5;" class="jumbotron container-fluid">
            <br>
            <div style="margin-top: -10px;">
              <h3 class="title" style="color: #0275d8">
                Change Password
              </h3>
            </div>
          </div>
          <br>
          <mat-card class="assessTest">
            <div *ngIf="!successfullyChangePassword">
              <mat-card-subtitle>
                <p>please enter your old password and the new password you would like for your account</p>
              </mat-card-subtitle>

              <div class="form-group row">
                <label for="inputOldPassword" class="col-sm-2 col-form-label">Old Password: </label>
                <div class="col-sm-8">
                  <input type="password" class="form-control" id="inputOldPassword" placeholder="Old Password" #tempPassword>
                </div>
              </div>
              <div class="form-group row">
                <label for="inputPassword" class="col-sm-2 col-form-label">New Password: </label>
                <div class="col-sm-8">
                  <input type="password" class="form-control" id="inputPassword" placeholder="New Password" #password>
                </div>
              </div>

              <div class="form-group row">
                <label for="inputRepeatPassword" class="col-sm-2 col-form-label">Repeat New Password: </label>
                <div class="col-sm-8">
                  <input type="password" class="form-control" id="inputRepeatPassword" placeholder="Repeat New Password" #repeatPassword>
                </div>
              </div>
              <div *ngIf="couldntProcessRequest">
                <p>Sorry we were unable to complete your request. Please try again later!</p>
              </div>
              <div *ngIf="incorrectOldPassword">
                <p>The old password that you inputted is incorrect</p>
              </div>
              <br>
              <hr>
              <mat-card-actions align="end">
                <button class="btn btn-sm btn-primary" (click)="ResetPassword(password.value, repeatPassword.value, tempPassword.value)">Change</button>
              </mat-card-actions>
            </div>
            <div *ngIf="successfullyChangePassword">
              <h4>You have successfully updated your password</h4>
              <p>You can now log in</p>
              <button class="btn btn-sm btn-primary">Return to Log In</button>
            </div>

          </mat-card>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
        </ng-template>

      </ngb-tab>
    </ngb-tabset> -->

    <mat-card style="min-height: 100vh;" class="page col-11">
        <mat-tab-group style="min-height: 75vh;">
            <mat-tab label="Account Details">
                <div style="background-color: #F5F5F5;" class="jumbotron container-fluid">
                    <br>
                    <div style="margin-top: -10px;">
                      <h3 class="title" style="color: #0275d8">
                        Account Details
                      </h3>
                    </div>
                  </div>
                  <br>
                  <div *ngIf="isClient">
                    <mat-card class="accountinfo">
                      <form>
                          <div class="form-group row">
                            <label for="inputFirstName" class="col-sm-3 col-form-label">First Name</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="inputFirstName" placeholder="First Name" value="{{patient.givenName}}" #newFirstName>
                              <div *ngIf='invalidFirstname' class='invalInput'>
                                  Please enter a valid first name
                              </div>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputLastName" class="col-sm-3 col-form-label">Last Name</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="inputLastName" placeholder="Last Name" value="{{patient.familyName}}" #newLastName>
                              <div *ngIf='invalidLastname' class='invalInput'>
                                  Please enter a valid last name
                              </div>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputPatientID" class="col-sm-3 col-form-label">Patient ID</label>
                            <div class="col-sm-9">
                              <input type="text" readonly class="form-control" id="inputPatientID" placeholder="Patient ID" value="{{patient.ID}}" placement="left"
                                ngbTooltip="The patient's ID cannot be modified">
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputEmail" class="col-sm-3 col-form-label">Email</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="inputEmail" placeholder="Email" value="{{patient.email}}" #newEmail>
                              <div *ngIf='invalidEmail' class='invalInput'>
                                  Please enter a valid email
                              </div>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputDOB" class="col-sm-3 col-form-label">DOB</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="inputDOB" placeholder="yyyy/MM/dd" value="{{patient.DOB  | date: 'yyyy-MM-dd'}}" #newBirthDate>
                              <div *ngIf='invalidFirstName' class='invalInput'>
                                  Please enter a valid Date of Birth
                              </div>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputGender" class="col-sm-3 col-form-label">Gender</label>
                            <div class="col-sm-9">
                              <select #newGender class="mydropdown">
                                    <option value="{{patient?.gender?._id}}">{{patient?.gender?.name}}</option>
                                    <option disabled="disabled">----</option>
                                    <option *ngFor="let g of genders" value="{{g._id}}">{{g.name}}</option>
                              </select>
                            </div>
                          </div>
                          <div class="form-group row">
                              <label for="inputAddress" class="col-sm-3 col-form-label">Address</label>
                              <div class="col-sm-9">
                                <input type="text" class="form-control" id="inputAddress" placeholder="Address" value="{{patient.address}}" #newAddress>
                                <div *ngIf='invalidAddress' class='invalInput'>
                                    Please enter a valid Address
                                </div>
                              </div>
                            </div>
                          <div class="form-group row">
                            <label for="inputPostalCode" class="col-sm-3 col-form-label">Postal Code</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="inputPostalCode" placeholder="Postal Code" value="{{patient.postalCode}}" #newPostalCode>
                              <div *ngIf='invalidPostalCode' class='invalInput'>
                                  Please enter a valid Postal Code
                              </div>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputPhoneNumber" class="col-sm-3 col-form-label">Phone Number</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="inputPhoneNumber" placeholder="Phone Number" value="{{patient.phone}}" (keyup)="closeWarning()" #newPhoneNumber>
                              <div *ngIf='invalidPhoneNumber' class='invalInput'>
                                  Please enter a valid phone number
                              </div>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputOthers" class="col-sm-3 col-form-label">Others</label>
                            <div class="col-sm-9">
                              <input type="text" class="form-control" id="inputOthers" placeholder="Others" value="{{patient.others}}" #newOthers>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputOthers" class="col-sm-3 col-form-label">Country</label>
                            <div class="col-sm-9">
                              <select #newCountry class="mydropdown" (change)="SetProvinceBox(newProvince, newCity); GetProvinces(newCountry.value); DifferentGetProvince(newCountry.value); cannotContinue=false;">
                                        <option value="{{patient.country?._id}}">{{patient.country.name}}</option>
                                        <option disabled="disabled">----</option>
                                        <option *ngFor="let country of countries" value="{{country._id}}">{{country.name}}</option>
                              </select>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputOthers" class="col-sm-3 col-form-label">Province</label>
                            <div class="col-sm-9">
                              <select #newProvince class="mydropdown" (change)="ClearAndGetCities(newProvince.value, newCity)">
                                        <option value="{{patient.province?._id}}">{{patient?.province?.name}}</option>
                                        <option disabled="disabled">----</option>
                                        <option *ngFor="let province of provinces" value="{{province._id}}">{{province.name}}</option>
                              </select>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="inputOthers" class="col-sm-3 col-form-label">City</label>
                            <div class="col-sm-9">
                              <select #newCity class="mydropdown">
                                        <option value="{{patient.city?._id}}">{{patient?.city?.name}}</option>
                                        <option disabled="disabled">----</option>
                                        <option *ngFor="let city of cities" value="{{city._id}}">{{city.name}}</option>
                              </select>
                            </div>
                          </div>
                        </form>
                      </mat-card>
                        <div *ngIf="cannotContinue" class="fixchanges"><p class="failureMessage">Error! Please fix the errors in the form before continuing</p></div>
                        <button type="button" class="btn btn-primary btn-sm" (click)="updatePatient(patient._id, newFirstName.value, newLastName.value, patient.ID, newEmail.value, newBirthDate.value, newPostalCode.value, newPhoneNumber.value, newOthers.value, newCountry.value, newProvince.value, newCity.value, newGender.value, newAddress.value); ">Confirm</button>      
                  </div>
                  <div *ngIf="isPhysio"></div>
            </mat-tab>
            <mat-tab label="Change Password">
                <div style="background-color: #F5F5F5;" class="jumbotron container-fluid">
                    <br>
                    <div style="margin-top: -10px;">
                      <h3 class="title" style="color: #0275d8">
                        Change Password
                      </h3>
                    </div>
                  </div>
                  <br>
                  <mat-card class="assessTest">
                    <div *ngIf="!successfullyChangePassword">
                      <mat-card-subtitle>
                        <p>please enter your old password and the new password you would like for your account</p>
                      </mat-card-subtitle>
        
                      <div class="form-group row">
                        <label for="inputOldPassword" class="col-sm-2 col-form-label">Old Password: </label>
                        <div class="col-sm-8">
                          <input type="password" class="form-control" id="inputOldPassword" placeholder="Old Password" #tempPassword>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label for="inputPassword" class="col-sm-2 col-form-label">New Password: </label>
                        <div class="col-sm-8">
                          <input type="password" class="form-control" id="inputPassword" placeholder="New Password" #password>
                        </div>
                      </div>
        
                      <div class="form-group row">
                        <label for="inputRepeatPassword" class="col-sm-2 col-form-label">Repeat New Password: </label>
                        <div class="col-sm-8">
                          <input type="password" class="form-control" id="inputRepeatPassword" placeholder="Repeat New Password" #repeatPassword>
                        </div>
                      </div>
                      <div *ngIf="couldntProcessRequest">
                        <p>Sorry we were unable to complete your request. Please try again later!</p>
                      </div>
                      <div *ngIf="incorrectOldPassword">
                        <p>The old password that you inputted is incorrect</p>
                      </div>
                      <br>
                      <hr>
                      <mat-card-actions align="end">
                        <button class="btn btn-sm btn-primary" (click)="ResetPassword(password.value, repeatPassword.value, tempPassword.value)">Change</button>
                      </mat-card-actions>
                    </div>
                    <div *ngIf="successfullyChangePassword">
                      <h4>You have successfully updated your password</h4>
                      <p>You can now log in</p>
                      <button class="btn btn-sm btn-primary">Return to Log In</button>
                    </div>
        
                  </mat-card>
                  <br>
                  <br>
                  <br>
                  <br>
                  <br>
                  <br>
                  <br>
            </mat-tab>
        </mat-tab-group>
      </mat-card>
  
  </mat-sidenav-content>
</mat-sidenav-container>