<h1>Register</h1>
<h4>Welcome to Self Start! Please input your information so we can properly register your account</h4>

<div class="container-fluid inputGroup">
  <form class="inputForm needs-validation" novalidate>
      <p class="smallText">*Required Fields</p>
      <mat-vertical-stepper [linear]="true" #stepper="matVerticalStepper">
        <mat-step label="Username and Password">
          <div class="form-group row">
            <label for="inputUsername" class="col-sm-2 col-form-label">*Username: </label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputUsername" placeholder="Username" #username required>
              <div class="invalInput" *ngIf="invalidUsername">
                  Please enter a valid username
              </div>
              <div class="hintText" *ngIf="!invalidUsername">
                Username cannot contain special characters
              </div>
              <div class='invalInput' *ngIf=""></div>
            </div> 
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputPassword" class="col-sm-2 col-form-label">*Password: </label>
            <div class="col-sm-7">
                  <input type="password" class="form-control" id="inputPassword" placeholder="Password" #password required>
                  <div class="hintText" *ngIf="!invalidPassword">
                    Passwords must match.
                  </div>
            </div>
        </div>
        <hr class='dvder'>
        <br>
        <br>
        <div class="form-group row">
              <label for="inputRepeatPassword" class="col-sm-2 col-form-label">*Repeat Password: </label>
              <div class="col-sm-7">
                <input type="password" class="form-control" id="inputRepeatPassword" placeholder="Repeat Password" #repeatPassword required>
                <div class="invalInput" *ngIf="invalidPassword">
                  Please fix the password fields so that they match
                </div>
              </div>
        </div>
        <button class="btn btn-primary btn-sm instepbtn" matStepperNext>Next</button>
        </mat-step>
        <mat-step  label="Personal Information">
          <div class="form-group row">
            <label for="inputFirstName" class="col-sm-2 col-form-label">*First Name: </label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputFirstName" placeholder="First Name" #firstName>
              <div class="invalInput" *ngIf="invalidFirstname">
                Please enter a valid Last Name
              </div>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputLastName" class="col-sm-2 col-form-label">*Last Name</label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputLastName" placeholder="Last Name" #lastName>
              <div class="invalInput" *ngIf="invalidFirstname">
                Please enter a valid First Name
              </div>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputEmail" class="col-sm-2 col-form-label">*Email</label>
            <div class="col-sm-7">
              <input type="email" class="form-control" id="inputEmail" placeholder="Email" #email>
              <div class="invalInput" *ngIf="invalidEmail">
                Please enter a valid Email
            </div>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputDOB" class="col-sm-2 col-form-label">Date Of Birth</label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputDOB" placeholder="Date Of Birth" #DOB>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputGender" class="col-sm-2 col-form-label">*Gender</label>
            <div class="col-sm-7">
              <select #newPatientGender class="mydropdown" id="inputGender">
                  <option value="badvalue">Please select a gender</option>
                  <option disabled="disabled">----</option>
                  <option *ngFor="let g of genders" value="{{g?._id}}">{{g?.name}}</option>
              </select>
              <div class="invalInput" *ngIf="invalidGender">
                  Please enter a valid gender
              </div>
            </div>
          </div>
          <button class="btn btn-secondary btn-sm instepbtn" matStepperPrevious>Previous</button>
          <button class="btn btn-primary btn-sm instepbtn" matStepperNext>Next</button>
        </mat-step>
        <mat-step  label="Contact Information">
          <div class="form-group row">
            <label for="inputPostalCode" class="col-sm-2 col-form-label">*Address</label>
            <div class="col-sm-8">
              <div class="form-inline">
                <input class="form-control col-6" type="text" placeholder="Address" id="inputAddress" #address>
                <input type="text" class="form-control ml-sm-2 col-3" id="inputPostalCode" placeholder="Postal Code" #postalCode>
              </div>
              <div class="invalInput" *ngIf="invalidPostalCode">
                  Please enter a valid Address and Postal Code
              </div>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputPhoneNumber" class="col-sm-2 col-form-label">*Phone Number</label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputPhoneNumber" placeholder="Phone Number" #phoneNumber>
              <div class="invalInput" *ngIf="invalidPhoneNumber">
                  Please enter a valid Phone Number
              </div>
              <div class="hintText" *ngIf="!invalidPhoneNumber">
                Please enter a valid 9 digit phone number
              </div>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputOthers" class="col-sm-2 col-form-label">*Country</label>
            <div class="col-sm-7">
              <select #newPatientCountry id="inputCountry" class="mydropdown" (change)="SetProvinceBox(newPatientProvince, newPatientCity); GetProvinces(newPatientCountry.value); DifferentGetProvince(newPatientCountry.value)">
                <option value="badvalue">Please select a country</option>
                <option disabled="disabled">----</option>    
                <option *ngFor="let country of countries" value="{{country?._id}}">{{country?.name}}</option>
              </select>
              <div class="invalInput" *ngIf="invalidCountry">
                  Please select a Country, Province and City
              </div>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputOthers" class="col-sm-2 col-form-label">*Province</label>
            <div class="col-sm-7">
              <select #newPatientProvince id="inputProvince" class="mydropdown" (change)="ClearAndGetCities(newPatientProvince.value, newPatientCity)">
                    <option *ngFor="let province of provinces" value="{{province?._id}}">{{province?.name}}</option>
              </select>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputOthers" class="col-sm-2 col-form-label">*City</label>
            <div class="col-sm-7">
              <select #newPatientCity id="inputCity" class="mydropdown">
                    <option *ngFor="let city of cities" value="{{city?._id}}">{{city?.name}}</option>
                  </select>
            </div>
          </div>
          <button class="btn btn-secondary btn-sm instepbtn" matStepperPrevious>Previous</button>
          <button class="btn btn-primary btn-sm instepbtn" matStepperNext>Next</button>
        </mat-step>
        <mat-step label="Additional Information">
          <div class="form-group row">
            <label for="inputMaritalStatus" class="col-sm-2 col-form-label">Marital Status</label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputMaritalStatus" placeholder="Marital Status" #maritalStatus>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputHealthCardNumber" class="col-sm-2 col-form-label">Health Card Number</label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputHealthCardNumber" placeholder="Health Card Number" #healthCardNumber>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
            <label for="inputOccupation" class="col-sm-2 col-form-label">Occupation</label>
            <div class="col-sm-7">
              <input type="text" class="form-control" id="inputOccupation" placeholder="Occupation" #occupation>
            </div>
          </div>
          <hr class='dvder'>
          <br>
          <br>
          <div class="form-group row">
              <label for="inputOthers" class="col-sm-2 col-form-label">Other Notable Info</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" id="inputOthers" placeholder="Other" #others>
              </div>
            </div>
          <button class="btn btn-secondary btn-sm instepbtn" matStepperPrevious>Previous</button>
          <button class="btn btn-primary btn-sm instepbtn" matStepperNext>Next</button>
        </mat-step>
        <mat-step label="Done">
            <ng-template #makeChanges let-c="close" let-d="dismiss">
                <div class="modal-header">
                  <h4 class="modal-title">Error in Required Fields</h4>
                </div>
                <div class="modal-body">
                  <p>There are errors in some of the required fields. Please go through and fix them. </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary btn-med" (click)="c('Close click')">OK</button>        
                </div>
            </ng-template>
            <ng-template #successfulModal let-c="close" let-d="dismiss">
                <div class="modal-header">
                  <h4 class="modal-title">Welcome!</h4>
                </div>
                <div class="modal-body">
                  <p>You have successfully created an account! Please click on the link that was sent to your email to verify your account and start using the website </p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary btn-med" (click)="c('Close click'); GoHome()">OK</button>        
                </div>
            </ng-template>
            <button class="btn btn-secondary btn-sm stepperbtn" (click)="stepper.reset()">Reset</button> 
            <button type="submit" class="btn btn-primary btn-sm stepperbtn" (click)="createClient(makeChanges, successfulModal, stepper)">Confirm</button> 
        </mat-step>
      </mat-vertical-stepper>  
  </form>
</div>
<br>
<br>
<br>
<br>
<br>



