<mat-sidenav-container>
    <mat-sidenav #sidenav mode="side" opened="true" style="background-color: #0275d8;">
        <mat-nav-list style="top: -10px;">
          <mat-list-item [routerLinkActive]="['active']">
            <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../home']">Dashboard</button>
          </mat-list-item>
          <br>
          <mat-divider class="dividers"></mat-divider>
          <mat-list-item [routerLinkActive]="['active']">
            <button class="btn-primary btn-block" mat-raised-button style="color:white;">Calendar</button>
          </mat-list-item>
          <br>
          <mat-divider class="dividers"></mat-divider>
          <mat-list-item [routerLinkActive]="['active']" >
            <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../clients']">Client Profiles</button></mat-list-item>
          <br>
          <mat-divider class="dividers"></mat-divider>
          <mat-list-item [routerLinkActive]="['active']" >
            <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../exercises']">Exercises</button></mat-list-item>
          <br>
          <mat-divider class="dividers"></mat-divider>
          <mat-list-item [routerLinkActive]="['active']" >
            <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../rehabplans']">Rehabilitation Plans</button></mat-list-item>
          <br>
          <mat-divider class="dividers"></mat-divider>
          <mat-list-item [routerLinkActive]="['active']" >
            <button class="btn-primary btn-block" mat-raised-button style="color:white;" [routerLink]="['../assessmenttests']">Assessment Tests</button></mat-list-item>
          <br>
          <mat-divider class="dividers"></mat-divider>
        </mat-nav-list>
        <mat-divider class="dividers"></mat-divider>
    </mat-sidenav>
  <mat-sidenav-content>
      <div style="background-color: #F5F5F5;" class="jumbotron container-fluid">
          <br>
          <div style="margin-top: -10px;">
              <h3 *ngIf="physio" class="title" style="color: #0275d8">
                  Good {{ timeOfDay }}<a *ngIf="physio">, {{ physio?.givenName }}.</a>
               </h3>
               <p class="quote">
                 Manage your appointments, book time off, or get a glimpse of your weekly schedule.
               </p>
          </div>
        </div>
    <div style="min-height: 100vh;" class="page col-11">
      <mat-card style="min-height: 75vh;">
        <div>
            <div id="cal">
            <mwl-demo-utils-calendar-header
              [(view)]="view"
              [(viewDate)]="viewDate"
              (viewDateChange)="fetchEvents()"
              (viewChange)="fetchEvents()">
            </mwl-demo-utils-calendar-header>
            
            <ng-template #loading>
              <div class="text-center">
                <i class="fa fa-spin fa-spinner fa-5x"></i>
                <br>
                Loading appointments...
              </div>
            </ng-template>
            
            <div *ngIf="events$ | async; else loading; let events">
              <div [ngSwitch]="view">
                <mwl-calendar-month-view
                  *ngSwitchCase="'month'"
                  [viewDate]="viewDate"
                  [events]="events"
                  [activeDayIsOpen]="activeDayIsOpen"
                  (dayClicked)="dayClicked($event.day)"
                  (eventClicked)="eventClicked($event.event)">
                </mwl-calendar-month-view>
                <mwl-calendar-week-view
                  *ngSwitchCase="'week'"
                  [viewDate]="viewDate"
                  [events]="events"
                  (eventClicked)="eventClicked($event.event)">
                </mwl-calendar-week-view>
                <mwl-calendar-day-view
                  *ngSwitchCase="'day'"
                  [viewDate]="viewDate"
                  [events]="events"
                  (eventClicked)="eventClicked($event.event)">
                </mwl-calendar-day-view>
              </div>
            </div>
            </div>
            <br>
        </div>
      </mat-card>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<ng-template #modalContent let-c="close" let-d="dismiss">  <div class="modal-header">
    <h4 class="modal-title">Appointment Details</h4>
    <button type="button" class="close" aria-label="Close" (click)="c('Close click'); ">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div>
      <p><b>Client Name: </b><!--{{appointment.userID}}--></p>
    </div>
    <div>
      <p><b>Date: </b><!--{{appointment.date}}--></p>
    </div>
    <div>
      <p><b>Type: </b><!--{{appointment.type}}--></p>
    </div>
    <div>
      <p><b>Description </b><!--{{appointment.reason}}--></p>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="c('Close click');">Close</button>
  </div>
</ng-template>

<ng-template #editModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Edit Appointment</h4>
    <button type="button" class="close" aria-label="Close" (click)="c('Close click'); ">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label"><b>Client Name</b></label>
        <div class="col-sm-9">
          <input type="text" class="form-control" id="name" placeholder="Name" #name>
          <!--value="{{appointment.userID}}"-->
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label"><b>Date</b></label>
        <div class="col-sm-9">
          <input type="text" class="form-control" id="date" placeholder="Date" #date>
          <!--value="{{appointment.date}}"-->
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label"><b>Type</b></label>
        <div class="col-sm-9">
          <input type="text" class="form-control" id="type" placeholder="Type" #type>
          <!--value="{{appointment.type}}"-->
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-3 col-form-label"><b>Description</b></label>
        <div class="col-sm-9">
          <input type="text" class="form-control" id="reason" placeholder="Description" #reason>
          <!--value="{{appointment.reason}}"-->
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary btn-sm" (click)="c('Close click');">Confirm</button>
    <button type="button" class="btn btn-secondary btn-sm" (click)="c('Close click');">Cancel</button>
  </div>
</ng-template>

<ng-template #deleteModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Are you sure you want to delete this appointment?</h4>
    <button type="button" class="close" aria-label="Close" (click)="c('Close click'); ">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary btn-sm" (click)="c('Close click');">Confirm</button>
    <button type="button" class="btn btn-secondary btn-sm" (click)="c('Close click');">Cancel</button>
  </div>
</ng-template>

<!--<ng-template #modalContent let-close="close">
  <div class="modal-header">
    <h5 class="modal-title">Appointment Details</h5>
    <button type="button" class="close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div>
      Client Name:
      <pre></pre>
    </div>
    <div>
      Date:
      <pre></pre>
    </div>
    <div>
      Type:
      <pre></pre>
    </div>
    <div>
      Reason:
      <pre></pre>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="close()">Close</button>
  </div>
</ng-template>-->


<!--<div id="cal">-->
<!--  <mwl-demo-utils-calendar-header-->
<!--    [(view)]="view"-->
<!--    [(viewDate)]="viewDate"-->
<!--    (viewDateChange)="fetchEvents()"-->
<!--    (viewChange)="fetchEvents()">-->
<!--  </mwl-demo-utils-calendar-header>-->
  
<!--  <ng-template #loading>-->
<!--    <div class="text-center">-->
<!--      <i class="fa fa-spin fa-spinner fa-5x"></i>-->
<!--      <br>-->
<!--      Loading appointments...-->
<!--    </div>-->
<!--  </ng-template>-->

<!--  <div *ngIf="events$ | async; else loading; let events">-->
<!--    <div [ngSwitch]="view">-->
<!--      <mwl-calendar-month-view-->
<!--        *ngSwitchCase="'month'"-->
<!--        [viewDate]="viewDate"-->
<!--        [events]="events"-->
<!--        [activeDayIsOpen]="activeDayIsOpen"-->
<!--        (dayClicked)="dayClicked($event.day)"-->
<!--        (eventClicked)="eventClicked($event.event)"-->
<!--        (eventTimesChanged)="eventTimesChanged($event)">-->
<!--      </mwl-calendar-month-view>-->
<!--      <mwl-calendar-week-view-->
<!--        *ngSwitchCase="'week'"-->
<!--        [viewDate]="viewDate"-->
<!--        [events]="events"-->
<!--        (eventClicked)="eventClicked($event.event)"-->
<!--        (eventTimesChanged)="eventTimesChanged($event)">-->
<!--      </mwl-calendar-week-view>-->
<!--      <mwl-calendar-day-view-->
<!--        *ngSwitchCase="'day'"-->
<!--        [viewDate]="viewDate"-->
<!--        [events]="events"-->
<!--        (eventClicked)="eventClicked($event.event)"-->
<!--        (eventTimesChanged)="eventTimesChanged($event)">-->
<!--      </mwl-calendar-day-view>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->
<!--<br><br>-->

<!-- The Third Modal which will be brought up when the physiotherapist wants to email the patient-->
<!--<div mdbModal #deleteModal="mdb-modal" class="modal fade mymodal" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">-->
<!--  <div class="modal-dialog modal-lg mymodal" role="document">-->
<!--    <div class="modal-content mymodal">-->
<!--      <div class="modal-header">-->
<!--        <h4 class="modal-title">Delete Appointment</h4>-->
<!--      </div>-->
<!--      <div class="modal-body">-->
<!--        <div class="form-group row">-->
<!--          <p>Are you sure you would like to delete this appointment?</p>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="modal-footer">-->
<!--        <button type="button" class="btn btn-primary btn-med" (click)="deleteModal.hide(); " data-dismiss="modal" mdbRippleRadius>Delete</button>  -->
<!--        <button type="button" class="btn btn-secondary btn-med" (click)="deleteModal.close();" data-dismiss="modal" mdbRippleRadius>Cancel</button>        -->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->
<!-- End of Third Modal -->

<!--<ng-template mdbModal #delModal="mdb-modal" class="modal fade mymodal" id="del" tabindex="-1" role="dialog" aria-labelledby="delModalLabel" aria-hidden="true" #deleteModal>
    <div class="modal-header" style="text-align: center;">
        <h4 class="modal-title">Are you sure you want to remove this appointment?</h4>
        <button type="button" class="close" aria-label="Close" (click)="c('Close click');">
             <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <button type="button" class="btn btn-primary btn-sm" (click)="c('Close click');">Confirm</button>
        <button type="button" class="btn btn-secondary btn-sm" (click)="c('Close click')">Cancel</button>

    </div>
</ng-template>-->